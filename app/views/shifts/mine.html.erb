<%= render "devise/shared/container" do %>

<nav aria-label="Breadcrumb" class="flex mb-8">
  <ol role="list" class="flex items-center space-x-4">
    <li>
      <div>
        <a href="<%= dashboard_path %>" class="text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-300">
          <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="size-5 shrink-0">
            <path d="M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z" clip-rule="evenodd" fill-rule="evenodd" />
          </svg>
          <span class="sr-only">Home</span>
        </a>
      </div>
    </li>
    <li>
      <div class="flex items-center">
        <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="size-5 shrink-0 text-gray-400 dark:text-gray-500">
          <path d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
        </svg>
        <span aria-current="page" class="ml-4 text-sm font-medium text-gray-500 dark:text-gray-400">My Shifts</span>
      </div>
    </li>
  </ol>
</nav>

<div class="px-4 sm:px-6 lg:px-8">
  <div class="sm:flex sm:items-center">
    <div class="sm:flex-auto">
      <h1 class="text-2xl font-semibold text-gray-900 dark:text-white">My Shifts</h1>
      <p class="mt-2 text-sm text-gray-700 dark:text-gray-300">Review your upcoming shifts and acknowledge them to confirm your schedule.</p>
    </div>
  </div>
  <div class="-mx-4 mt-8 sm:-mx-0">
    <table class="min-w-full divide-y divide-gray-300 dark:divide-white/15">
      <thead>
        <tr>
          <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0 dark:text-white">
						<span class="hidden lg:block">ID</span>
					  <span class="lg:hidden">Shift</span>
					</th>
					<th scope="col" class="hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 lg:table-cell dark:text-white">Start</th>
          <th scope="col" class="hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 lg:table-cell dark:text-white">End</th>
          <th scope="col" class="hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 sm:table-cell dark:text-white">Notes</th>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white">Status</th>
          <th scope="col" class="py-3.5 pl-3 pr-4 sm:pr-0">
            <span class="sr-only">Acknowledge</span>
          </th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200 bg-white dark:divide-white/10 dark:bg-gray-900">
				<% @shifts.each do |shift| %>
					<tr id="<%= dom_id(shift) %>" class="hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer" onclick="window.location='<%= user_shift_path(shift.user, shift) %>'">
						<td class="w-full max-w-0 py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:w-auto sm:max-w-none sm:pl-0 dark:text-white">
							#<%= shift.id %>
							<dl class="font-normal lg:hidden">
								<dt class="sr-only">Start</dt>
								<dd class="mt-1 truncate text-gray-700 dark:text-gray-300"><%= shift.start_time.strftime("%b %d %H:%M") %></dd>
								<dt class="sr-only">End</dt>
								<dd class="mt-1 truncate text-gray-700 dark:text-gray-300"><%= shift.end_time.strftime("%b %d %H:%M") %></dd>
								<dt class="sr-only sm:hidden">Notes</dt>
								<dd class="mt-1 truncate text-gray-500 sm:hidden dark:text-gray-400"><%= shift.notes %></dd>
							</dl>
						</td>
						<td class="hidden px-3 py-4 text-sm text-gray-500 lg:table-cell dark:text-gray-400"><%= shift.start_time.strftime("%b %d %H:%M") %></td>
						<td class="hidden px-3 py-4 text-sm text-gray-500 lg:table-cell dark:text-gray-400"><%= shift.end_time.strftime("%b %d %H:%M") %></td>
						<td class="hidden px-3 py-4 text-sm text-gray-500 sm:table-cell dark:text-gray-400"><%= shift.notes %></td>

						<td class="px-3 py-4 text-sm text-gray-500 dark:text-gray-400">
							<% if shift.acknowledged? %>
								<span class="inline-flex items-center rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-700 dark:bg-green-400/10 dark:text-green-400">Acknowledged</span>
							<% else %>
								<span class="inline-flex items-center rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 dark:bg-gray-400/10 dark:text-gray-400">Pending</span>
							<% end %>
						</td>

						<td class="py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0" onclick="event.stopPropagation()">
							<% unless shift.acknowledged? %>
                <%= link_to acknowledge_user_shift_path(shift.user, shift),
                    data: { turbo_method: :patch },
                    class: "inline-flex items-center gap-x-1.5 rounded-md bg-blue-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 dark:bg-blue-500 dark:shadow-none dark:hover:bg-blue-400 dark:focus-visible:outline-blue-500" do %>
                  <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="-ml-0.5 size-5">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z" clip-rule="evenodd" />
                  </svg>
									Acknowledge
                <% end %>
							<% end %>
						</td>
					</tr>
				<% end %>
      </tbody>
    </table>
  </div>
</div>

<% end %>
